import{a as f,d as S,e as g}from"./chunk-FTH4HYGB.js";import{D as l,G as u,S as x,U as p,d as m,j as o,l as s,m as c,p as r,q as i,r as t,s as h,w as e}from"./chunk-6N7GZ7C6.js";var E=()=>["/documentation"],b=(()=>{class n{static \u0275fac=function(a){return new(a||n)};static \u0275cmp=s({type:n,selectors:[["migration"]],standalone:!1,decls:248,vars:4,consts:[["tagline","Coming from ng2-smart-table"],[1,"main-content"],["target","_blank","href","https://github.com/dj-fiorex/angular2-smart-table/issues"],[3,"routerLink"],["href","https://github.com/akveo/nebular/blob/master/src/framework/theme/styles/global/tables/_smart-table.theme.scss","target","_blank"],["href","https://github.com/dj-fiorex/angular2-smart-table/issues/65","target","_blank"],["href","https://github.com/dj-fiorex/angular2-smart-table/blob/master/projects/demo/src/app/pages/examples/custom-edit-view/basic-example-button-view.component.ts","target","_blank",1,"source"],["highlight","",1,"typescript"],[1,"highlight"]],template:function(a,v){a&1&&(h(0,"header-component",0),i(1,"section",1)(2,"h2"),e(3,"Migration Guide"),t(),i(4,"p"),e(5," This document is for people who migrate their project from ng2-smart-table to this fork. It contains information about the most significant changes and gives some advice that help integrating this fork into your project. "),t(),i(6,"p"),e(7," Please consider, that while we are trying to be as compatible as possible, we may have introduced breaking changes. Thus the increase of version number from the latest ng2-smart-table 1.7.2 to 2.x. If you need help for a specific problem, open an "),i(8,"a",2),e(9,"Issue"),t(),e(10," on GitHub and we try to help. "),t(),i(11,"p"),e(12," The recent component documentation including compatibility attributes you can find "),i(13,"a",3),e(14,"here"),t(),e(15,". "),t(),i(16,"h3"),e(17,"Bring Back the Styling"),t(),i(18,"p"),e(19," If you want to stick to the original styling of the smart-table, you can copy the "),i(20,"a",4),e(21,"original SCSS file"),t(),e(22," into your project and replace the "),i(23,"code"),e(24,"ng2-"),t(),e(25," prefix of the selectors with "),i(26,"code"),e(27,"angular2-"),t(),e(28,". There is no guarantee that this results in a perfect replica of the original styling, but it may come a lot more closer. "),t(),i(29,"h3"),e(30,"Setting Keys"),t(),e(31," This Section describes the changes to the settings object. "),i(32,"h4"),e(33,"Deprecated"),t(),i(34,"p"),e(35," The following setting keys have been deprecated in 2.x and removed in 3.0.0: "),t(),i(36,"ul")(37,"li")(38,"code"),e(39,"editable"),t(),e(40," was renamed to "),i(41,"code"),e(42,"isEditable"),t()(),i(43,"li")(44,"code"),e(45,"sort"),t(),e(46," was renamed to "),i(47,"code"),e(48,"isSortable"),t()(),i(49,"li"),e(50,"The possibility to set "),i(51,"code"),e(52,"filter"),t(),e(53," to false was replaced with an "),i(54,"code"),e(55,"isFilterable"),t(),e(56," attribute"),t(),i(57,"li")(58,"code"),e(59,"expandedRowComponent"),t(),e(60," has been into "),i(61,"code"),e(62,"expand"),t(),e(63," and was renamed to "),i(64,"code"),e(65,"component"),t()(),i(66,"li")(67,"code"),e(68,"expandRowButtonContent"),t(),e(69," was renamed to "),i(70,"code"),e(71,"buttonContent"),t(),e(72," (it is already part of the "),i(73,"code"),e(74,"expand"),t(),e(75," settings group)"),t(),i(76,"li")(77,"code"),e(78,"class"),t(),e(79," was split into the separate "),i(80,"code"),e(81,"classHeader"),t(),e(82," and "),i(83,"code"),e(84,"classContent"),t(),e(85," settings"),t()(),i(86,"h4"),e(87,"New Settings"),t(),i(88,"p")(89,"code"),e(90,"isAddable"),t(),e(91," - This flag works like "),i(92,"code"),e(93,"isEditable"),t(),e(94," (formerly "),i(95,"code"),e(96,"editable"),t(),e(97,") but affects the cell in the row that is displayed when adding a new item (inline mode only). The "),i(98,"code"),e(99,"isEditable"),t(),e(100,' flag on the other hand has no effect on the "add" row. This way you can control whether an attribute shall be immutable once it has been added. '),t(),i(101,"p")(102,"code"),e(103,"expand"),t(),e(104," - With these settings you can enable and configure an additional action button to expand rows into full blown angular components that are displayed next to the expanded row. Read the "),i(105,"a",3),e(106,"documentation"),t(),e(107," for details. "),t(),i(108,"p")(109,"code"),e(110,"editor.config.disableEnterKeySave"),t(),e(111," - By default, hitting ENTER in text, textarea, or select editor, the row is submitted. This behavior can be disabled via this new setting. "),t(),i(112,"p")(113,"code"),e(114,"hideable"),t(),e(115," - Controls whether columns can be hidden by the user. "),t(),i(116,"p")(117,"code"),e(118,"resizable"),t(),e(119," - Controls whether columns can be resized by the user. This is currently experimental and may not work smoothly in all environments. "),t(),i(120,"h3"),e(121,"Changed Behavior"),t(),i(122,"p"),e(123," For some reason, the "),i(124,"code"),e(125,"DataSource.setSort()"),t(),e(126," method allowed the specification of multiple fields. However, support for sorting by multiple columns was never really implemented. Now it is, but to keep the API backwards compatible, "),i(127,"code"),e(128,"setSort()"),t(),e(129," still replaces the entire sort configuration and we introduced a new "),i(130,"code"),e(131,"updateSort()"),t(),e(132," method to adjust sorting parameters. "),t(),i(133,"h3"),e(134,"New Custom Renderer Initialization"),t(),i(135,"p"),e(136," Custom renderers were previously initialized by patching the renderer object with a "),i(137,"code"),e(138,"value"),t(),e(139," and a "),i(140,"code"),e(141,"rowData"),t(),e(142," attribute. Those attributes were defined in a "),i(143,"code"),e(144,"ViewCell"),t(),e(145," interface and the custom renderer should implement this interface. However, the interface is too restrictive and does not allow complex types (for which custom renderers are usually needed). See issue "),i(146,"a",5),e(147,"#65"),t(),e(148," for more information. "),t(),i(149,"p"),e(150," Since version 3.0.0, the new way of initializing a custom renderer, is to specify a "),i(151,"code"),e(152,"componentInitFunction"),t(),e(153," in the "),i(154,"code"),e(155,"settings"),t(),e(156," of the column where the "),i(157,"code"),e(158,"renderComponent"),t(),e(159," is specified. You can find an example in the "),i(160,"a",6),e(161,"Demo Source"),t(),e(162,". "),t(),i(163,"h3"),e(164,"Avoidance of Type Confusion"),t(),i(165,"p"),e(166," In the previous implementation of cells editors, type confusion could happen when the value provided by the data source was not "),i(167,"code"),e(168,"string"),t(),e(169,". Since a web formula can "),i(170,"em"),e(171,"only"),t(),e(172," work with strings, the effect was usually the following: "),t(),i(173,"ul")(174,"li"),e(175,"a value of a different type (e.g. "),i(176,"code"),e(177,"number"),t(),e(178,") was loaded in the form an internally stringified"),t(),i(179,"li"),e(180,"when a cell was edited, the new value is stored and always has type "),i(181,"code"),e(182,"string"),t()(),i(183,"li"),e(184,"when the row was saved, all edited values were saved as "),i(185,"code"),e(186,"string"),t(),e(187," and untouched values were kept"),t()(),i(188,"p"),e(189," That means, after saving a row, it was never obvious which type a value in a cell has, leading to all sorts of errors. To address this issue, since version 3.0.0 the visual representation of the data in a cell is always supposed to be of type "),i(190,"code"),e(191,"string"),t(),e(192,". You are encouraged to use the "),i(193,"code"),e(194,"valuePrepareFunction"),t(),e(195," in the column settings to convert a value of a different type to a value of type "),i(196,"code"),e(197,"string"),t(),e(198,", and use the new "),i(199,"code"),e(200,"valueStoreFunction"),t(),e(201," to have the user input of type "),i(202,"code"),e(203,"string"),t(),e(204," converted back to the a value of the correct type in your data source. The following example shows this with columns of type "),i(205,"code"),e(206,"number|null"),t(),e(207,": "),t(),i(208,"pre"),e(209,"    "),i(210,"code",7),e(211,`
      {
        title: 'Age',
        isEditable: true,
        valuePrepareFunction: (x) => x?.toString() ?? '',
        valueStoreFunction: (x: string) => {
          const s = x.trim();
          if (s === '') return null;
          return Number(s);
        },
      }
    `),t(),e(212,`
  `),t(),i(213,"h3"),e(214,"Fixed Bugs"),t(),i(215,"p"),e(216," The documentation of the method "),i(217,"code"),e(218,"DataSource.count()"),t(),e(219," claimed to return the number of elements in the data source. But actually it only returns the number of filtered elements. For compatibility we only fixed the documentation. "),t(),i(220,"p")(221,"span",8),e(222,"ServerDataSource"),t(),e(223," - The behavior of the methods "),i(224,"code"),e(225,"getFilteredAndSorted()"),t(),e(226," and "),i(227,"code"),e(228,"getAll()"),t(),e(229," is fixed. Previously, these methods were inherited from "),i(230,"code"),e(231,"LocalDataSource"),t(),e(232," and returned the elements based on the "),i(233,"code"),e(234,"data"),t(),e(235," array within the data source. But in case of the the "),i(236,"code"),e(237,"ServerDataSource"),t(),e(238," this array is already filtered, sorted, and paginated. The new implementation updates the contents of the data source with the correct data by submitting the correct request. That also means, that you now have to be a bit careful when using "),i(239,"code"),e(240,"getAll()"),t(),e(241," with an "),i(242,"code"),e(243,"ServerDataSource"),t(),e(244," if the server stores a lot of data, because now you "),i(245,"em"),e(246,"really"),t(),e(247," get all the data. "),t()()),a&2&&(o(13),r("routerLink",l(2,E)),o(92),r("routerLink",l(3,E)))},dependencies:[x,f,S],encapsulation:2})}return n})();var w=[{path:"",component:b}];var H=(()=>{class n{static \u0275fac=function(a){return new(a||n)};static \u0275mod=c({type:n});static \u0275inj=m({imports:[u,p.forChild(w),g]})}return n})();export{H as MigrationModule};

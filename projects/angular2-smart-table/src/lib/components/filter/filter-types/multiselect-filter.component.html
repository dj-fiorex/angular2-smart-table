<div class="filter-wrapper">
  <div class="multi-select-container">
    <button type="button"
            class="multi-select-trigger"
            [ngClass]="inputClass"
            (click)="toggleDropdown($event)">
      {{ getSelectedText() }}
      <span class="dropdown-arrow">â–¼</span>
    </button>

    @if (dropdownOpen) {
      <div class="multi-select-dropdown" (scroll)="$event.stopPropagation()" (wheel)="onDropdownWheel($event)">
       <div class="dropdown-header">
        <input type="text"
              id="search-input"
              class="search-input"
              [placeholder]="searchPlaceholder"
              [value]="searchText"
              (input)="onSearchChange($event)"
              (click)="$event.stopPropagation()"
              aria-label="Search">
          <div class="action-buttons">
            <button type="button" (click)="selectAll($event)">{{ selectAllButtonText }}</button>
            <button type="button" (click)="clearAll($event)">{{ clearAllButtonText }}</button>
          </div>
        </div>

        <div class="options-list" (scroll)="$event.stopPropagation()">
          @for (option of filteredOptions; track option.value) {
            <label class="option-item"
                   (click)="$event.stopPropagation()">
              <input type="checkbox"
                     [checked]="isSelected(option.value)"
                     (change)="toggleOption(option.value)">
              <span>{{ option.title }}</span>
            </label>
          }
        </div>

        <div class="dropdown-footer">
          <button type="button"
                class="apply-btn"
                [disabled]="isApplyDisabled"
                (click)="applyFilter($event)">
          {{ applyButtonText }}
        </button>

          <button type="button"
                  class="clear-btn"
                  (click)="clearFilter($event)">
            {{ clearButtonText }}
          </button>
        </div>
      </div>
    }
  </div>
</div>
